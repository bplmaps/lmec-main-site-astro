---
import { storyblokEditable } from '@storyblok/astro';

export interface Props {
  blok: {
    name: string;
    cycle: number;
    title: string;
    completeness: boolean;
    projectURL: {
      url: string;
    };
    image: {
      filename: string;
    };
    color: string;
  };
}

const { blok } = Astro.props
---

<div {...storyblokEditable(blok)} class="col-lg-4 col-md-5 col-sm-6 mb-5 mb-lg-0 my-3">
  <div class="card rounded-0 hover-shadow alt-gallery-card">
    <div class="card-img position-relative">
      <img class="card-img-top rounded-0" src={ blok.image.filename ? blok.image.filename : "https://iiif.digitalcommonwealth.org/iiif/2/commonwealth:3f463366g/1292,3248,8404,3417/1200,/0/default.jpg"} height="100px"/>
    </div>
    <div class="card-body">
      <h5 class="card-title">{ blok.title }</h5>
      <span>By <i>{ blok.name }</i></span><br><br>
      <span class:list={["badge font-secondary text-white fw-normal mt-1", blok.color]}>Part of the { blok.cycle } cycle</span><br /><br /> 
      {blok.completeness ? 
      <a href={ blok.projectURL.url } target="_blank" class="btn btn-primary btn-primary-outline btn-xs mb-2"><i class="fas fa-external-link-square-alt me-2"></i> See the publication</a>
      : <span></span>}
    </div>
  </div>
</div>
